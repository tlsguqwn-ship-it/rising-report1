# 작업 기록 - 2026년 2월 10일

## 📋 작업 목표
마감 리포트에 다크모드 구현 및 장전/마감 리포트 색상 차별화

---

## ✅ 완료된 작업

### 1. 시간 기반 기본 리포트 자동 선택
- **파일**: `constants.tsx`
- **내용**: `INITIAL_REPORT`를 시간 기반으로 변경
  - KST 06:00~17:59 → 장전 리포트 기본 로드
  - KST 18:00~05:59 → 마감 리포트 기본 로드
- **구현**: `getInitialReport()` 함수로 `new Date().getHours()` 기반 분기

### 2. 다크모드 상태 관리
- **파일**: `App.tsx`
  - `darkMode` 상태 추가 (`useState(false)`)
  - `Toolbar`와 `ReportPreview`에 props 전달

### 3. 다크모드 토글 버튼
- **파일**: `Toolbar.tsx`
  - `darkMode`, `onDarkModeToggle` props 추가
  - 마감 모드일 때만 표시되는 Moon/Sun 토글 버튼 구현
  - `lucide-react`의 Sun, Moon 아이콘 사용

### 4. ReportPreview 다크모드 전면 적용
- **파일**: `ReportPreview.tsx`
- **적용 범위**:

#### 4-1. 테마 색상 변수 시스템
```
isDark = !isPreMarket && darkMode
pageBg: 다크(#0f0f14) / 라이트(white)
pageText: 다크(slate-100) / 라이트(slate-900)
cardBg: 다크(#1a1a24) / 라이트(white)
cardBorder: 다크(#2a2a3a) / 라이트(slate-100)
subText: 다크(slate-400) / 라이트(slate-600)
labelText: 다크(slate-500) / 라이트(slate-400)
sectionBg: 다크(#12121a) / 라이트(slate-50)
dividerColor: 다크(border-white/5) / 라이트(border-slate-100)
```

#### 4-2. renderHeader (헤더)
- 다크모드 텍스트/보더 색상 전환

#### 4-3. renderIndicators (지표 섹션)
- KOSPI/KOSDAQ 카드: 다크 배경(#1a1a24), 보더(#2a2a3a)
- 외인/기관/환율 카드: 동일 다크 테마 적용
- 라벨 텍스트 색상 분기

#### 4-4. renderCoreView (핵심 시장 전망)
- **장전**: 기존 파란 계열 (bg-[#0f172a], blue-400)
- **마감 화이트**: 따뜻한 그라데이션 (from-[#1a1520] to-[#261a1a]), 레드(#f04452) 액센트
- **마감 다크**: 어두운 카드(#1a1a24), 레드 링 & 도트

#### 4-5. renderInsight (CEO 브리핑)
- 다크: 어두운 카드 배경, 레드 아이콘/라벨, 밝은 텍스트
- 칩 색상: 다크(#2a1a1e + #ff8a8a) / 라이트(orange 계열)
- Focus On 뱃지: 다크(#f04452/20 배경)

#### 4-6. renderFeaturedStocks (종목 테이블)
- 테이블 전체 다크 테마
- 헤더, 행 호버, 구분선, 텍스트 색상 조건부 적용

#### 4-7. renderSectorsAndSchedule (섹터/일정)
- 섹터 카드: 다크 배경/보더, 호버 시 레드 보더
- 일정 타임라인: 다크 배경, 어두운 세로선
- 추가 버튼: 다크 시 레드 호버

#### 4-8. 페이지 컨테이너 (1~2페이지)
- 페이지 배경: `pageBg` 적용
- 상단 강조 바: 다크 시 레드(#f04452)
- 2페이지 헤더: pageText 적용

#### 4-9. 마무리 코멘트/면책
- 마무리 코멘트: 다크 시 레드 그라데이션 배경
- "오늘의 한마디" 라벨: 다크 시 레드
- 면책 구분선/텍스트: 다크 톤 적용

### 5. 마감 리포트 기본 텍스트 변경
- `constants.tsx`
  - `expertAnalysisTitle`: '수석 애널리스트 인사이트' → 'RISING STOCK 마감 브리핑'
  - `featuredStocksTitle`: '오늘의 핵심 종목' → '오늘의 주요 종목'
  - 리포트 제목: '마감 시황 리포트'

### 6. 마감 모드 지표 표시 개선
- `services/gemini.ts`: KOSPI/KOSDAQ subText에 changeAmount 포함 (`12.35  -1.10%` 형태)
- `ReportPreview.tsx`: 외인/기관/환율 카드에서 화살표(▲/▼) 제거, 텍스트 정렬 개선

---

## 🎨 색상 체계 요약

| 구분 | 장전 (Pre-Market) | 마감 화이트 | 마감 다크 |
|------|-------------------|-------------|-----------|
| 메인 테마 | 파랑 (sky/blue) | 주홍/레드 (#f04452) | 레드 (#f04452) |
| 페이지 배경 | 흰색 | 흰색 | #0f0f14 |
| 카드 배경 | 흰색 | 흰색 | #1a1a24 |
| 카드 보더 | slate-100 | slate-100 | #2a2a3a |
| 액센트 | blue-400/sky-500 | #f04452 | #f04452 |
| 텍스트 | slate-900 | slate-900 | slate-100 |

---

## 📁 수정된 파일 목록
1. `constants.tsx` - 시간 기반 기본 리포트, 마감 텍스트 변경
2. `App.tsx` - darkMode 상태, props 전달
3. `components/Toolbar.tsx` - 다크모드 토글 버튼
4. `components/ReportPreview.tsx` - 전체 다크모드 스타일링
5. `services/gemini.ts` - KOSPI/KOSDAQ subText 형식 변경
